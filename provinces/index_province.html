<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>ECharts</title>
    <!--
    -->
    <script type="text/javascript" src="./js/allpos_t.json" charset="gbk"></script>
    <script type="text/javascript" src="./js/geoinfo.json"></script>
    <script type="text/javascript" src="./js/changjiang.json"></script>
    <script type="text/javascript" src="./js/geo_tool.js"></script>
    <script type="text/javascript" src="./js/tools.js"></script>
    <!-- 引入 echarts.js -->
	<script src="https://cdn.bootcss.com/echarts/4.2.1-rc1/echarts.min.js"></script>
</head>
<body>
    <!-- 为ECharts准备一个具备大小（宽高）的Dom -->
    <div id="map" style="width: 90%;height:800px;"></div>
    <button id="btn">export</button>
    <script type="text/javascript">

        //长江多边形坐标
        var changjinag_polys = changjiang_poly.features[0].geometry.coordinates[0]
        //console.log(changjinag_polys)

        var ep_len = Object.keys(enterprises).length;
        console.log("企业总数：", ep_len)
        var ep_lines = convert_ep_lines(enterprises);
        //console.log(ep_lines);
        var ep_data = convert_year_scatters(enterprises);
        //console.log(ep_data);

        var province_data = {
            "安徽省": [["人口", 3569.0], ["空气质量", 2664.0], ["共同富裕综合指标", 2427.0], ["就业率", 2217.0], ["乡村城镇养老保险比", 2109.0], ["乡村养老保险人数", 2084.0], ["就业人数", 2046.0], ["accident_dead", 1952.0], ["城镇率", 1909.0], ["数字经济指数", 1796.0]], 
            "北京市": [["城镇率", 3408.0], ["共同富裕综合指标", 2969.0], ["空气质量", 2838.0], ["数字经济指数", 2250.0], ["生师比", 2218.0], ["乡村城镇养老保险比", 2182.0], ["就业人数", 2090.0], ["人口", 2062.0], ["交通事故数量", 2015.0], ["财政支出占比", 1991.0]], 
            "福建省": [["人口", 3368.0], ["乡村城镇养老保险比", 3359.0], ["交通事故数量", 3140.0], ["每万人医疗保险", 2660.0], ["就业人数", 2505.0], ["三产占比", 2371.0], ["数字经济指数", 2357.0], ["空气质量", 2172.0], ["财政支出占比", 1996.0], ["城镇率", 1762.0]], 
            "甘肃省": [["乡村城镇养老保险比", 3809.0], ["数字经济指数", 3626.0], ["二产GDP", 3277.0], ["交通事故数量", 3046.0], ["空气质量", 2889.0], ["就业率", 2704.0], ["一产GDP", 2248.0], ["共同富裕综合指标", 2109.0], ["人口", 1945.0], ["tech", 1936.0]], 
            "广东省": [["数字经济指数", 4271.0], ["人口", 4248.0], ["空气质量", 3172.0], ["就业率", 3119.0], ["交通事故数量", 2650.0], ["共同富裕综合指标", 2617.0], ["就业人数", 2117.0], ["乡村城镇养老保险比", 1814.0], ["财政支出占比", 1761.0], ["每万人绿地", 1636.0]], 
            "广西壮族自治区": [["人口", 3951.0], ["空气质量", 2984.0], ["交通事故数量", 2869.0], ["数字经济指数", 2818.0], ["就业人数", 2165.0], ["三产占比", 1900.0], ["乡村城镇养老保险比", 1896.0], ["绿地面积", 1773.0], ["生师比", 1726.0], ["财政支出占比", 1705.0]], 
            "贵州省": [["人口", 4218.0], ["共同富裕综合指标", 3541.0], ["三产占比", 3383.0], ["数字经济指数", 2967.0], ["就业率", 2737.0], ["交通事故死亡率", 2631.0], ["生师比", 2371.0], ["空气质量", 1948.0], ["交通事故数量", 1665.0], ["就业人数", 1609.0]], 
            "海南省": [["就业率", 3259.0], ["人口", 3042.0], ["数字经济指数", 3027.0], ["生师比", 2595.0], ["绿地面积", 2525.0], ["乡村城镇养老保险比", 2376.0], ["共同富裕综合指标", 2179.0], ["trash", 1985.0], ["空气质量", 1803.0], ["医疗保险参保人数", 1776.0]], 
            "河北省": [["一产GDP", 4019.0], ["人口", 3805.0], ["数字经济指数", 3118.0], ["乡村城镇养老保险比", 3000.0], ["生师比", 2621.0], ["三产占比", 2425.0], ["二产GDP", 2328.0], ["空气质量", 2240.0], ["就业人数", 1948.0], ["平均房价", 1651.0]], 
            "河南省": [["空气质量", 4177.0], ["人口", 3733.0], ["每万人医疗保险", 2753.0], ["三产占比", 2568.0], ["财政支出占比", 2357.0], ["交通事故数量", 2283.0], ["数字经济指数", 2109.0], ["共同富裕综合指标", 2014.0], ["就业人数", 1954.0], ["医疗保险参保人数", 1627.0]], 
            "黑龙江省": [["数字经济指数", 4166.0], ["空气质量", 3297.0], ["人口", 3043.0], ["绿地面积", 2466.0], ["乡村城镇养老保险比", 2449.0], ["共同富裕综合指标", 2318.0], ["生师比", 2176.0], ["每万人绿地", 1816.0], ["财政支出占比", 1697.0], ["交通事故数量", 1661.0]], 
            "湖北省": [["共同富裕综合指标", 3568.0], ["数字经济指数", 3263.0], ["就业人数", 2981.0], ["每万人医疗保险", 2906.0], ["财政支出占比", 2697.0], ["人口", 2685.0], ["城镇率", 2519.0], ["空气质量", 2045.0], ["交通事故死亡率", 1976.0], ["生师比", 1697.0]], 
            "湖南省": [["就业人数", 3885.0], ["一产GDP", 3340.0], ["生师比", 3188.0], ["共同富裕综合指标", 3077.0], ["医疗保险参保人数", 3004.0], ["空气质量", 2538.0], ["财政支出占比", 2400.0], ["数字经济指数", 2276.0], ["城镇率", 1966.0], ["人口", 1487.0]], 
            "吉林省": [["数字经济指数", 4156.0], ["人口", 3420.0], ["三产GDP", 2891.0], ["一产GDP", 2841.0], ["空气质量", 2409.0], ["accident_dead", 2211.0], ["二产GDP", 2028.0], ["交通事故死亡率", 1846.0], ["乡村城镇养老保险比", 1692.0], ["gdp", 1622.0]], 
            "江苏省": [["空气质量", 4711.0], ["人口", 4496.0], ["生师比", 3607.0], ["数字经济指数", 3224.0], ["乡村养老保险人数", 2867.0], ["共同富裕综合指标", 2740.0], ["财政支出占比", 2660.0], ["一产GDP", 2264.0], ["就业人数", 2094.0], ["就业率", 2020.0]], 
            "江西省": [["人口", 4006.0], ["数字经济指数", 3045.0], ["共同富裕综合指标", 2993.0], ["交通事故死亡率", 2833.0], ["财政支出占比", 2813.0], ["生师比", 2724.0], ["空气质量", 2695.0], ["三产占比", 2617.0], ["交通事故数量", 2164.0], ["就业人数", 2048.0]], 
            "辽宁省": [["空气质量", 3794.0], ["数字经济指数", 3085.0], ["人口", 2699.0], ["三产GDP", 2215.0], ["一产GDP", 2080.0], ["trash", 1971.0], ["共同富裕综合指标", 1672.0], ["三产占比", 1598.0], ["乡村养老保险人数", 1566.0], ["就业人数", 1552.0]], 
            "内蒙古自治区": [["数字经济指数", 3753.0], ["空气质量", 3632.0], ["人口", 3406.0], ["乡村城镇养老保险比", 2600.0], ["二产GDP", 2120.0], ["乡村养老保险人数", 2112.0], ["gdp", 1878.0], ["三产GDP", 1805.0], ["三产占比", 1711.0], ["trash", 1627.0]], 
            "宁夏回族自治区": [["人口", 4141.0], ["accident_dead", 3356.0], ["数字经济指数", 3354.0], ["共同富裕综合指标", 3029.0], ["空气质量", 2897.0], ["trash", 2371.0], ["生师比", 2169.0], ["城镇率", 2106.0], ["交通事故数量", 1982.0], ["财政支出占比", 1743.0]], 
            "青海省": [["数字经济指数", 4733.0], ["人口", 4617.0], ["二产GDP", 3103.0], ["财政支出占比", 2609.0], ["三产占比", 2480.0], ["空气质量", 2479.0], ["就业人数", 2410.0], ["共同富裕综合指标", 2335.0], ["accident_dead", 1973.0], ["trash", 1729.0]], 
            "山东省": [["空气质量", 4672.0], ["数字经济指数", 3675.0], ["交通事故数量", 3517.0], ["人口", 3443.0], ["共同富裕综合指标", 3365.0], ["二产GDP", 2430.0], ["就业人数", 1807.0], ["财政支出占比", 1749.0], ["乡村城镇养老保险比", 1638.0], ["乡村养老保险人数", 1423.0]], 
            "山西省": [["人口", 3649.0], ["空气质量", 3009.0], ["一产GDP", 2904.0], ["三产占比", 2463.0], ["就业率", 2426.0], ["数字经济指数", 2334.0], ["就业人数", 2039.0], ["共同富裕综合指标", 1833.0], ["三产GDP", 1605.0], ["城镇率", 1514.0]], 
            "陕西省": [["人口", 3405.0], ["数字经济指数", 3269.0], ["每万人医疗保险", 3235.0], ["三产占比", 2709.0], ["生师比", 2378.0], ["乡村城镇养老保险比", 2299.0], ["空气质量", 2254.0], ["交通事故数量", 2189.0], ["就业人数", 2012.0], ["城镇率", 1788.0]], 
            "上海市": [["就业率", 2920.0], ["bed", 2749.0], ["就业人数", 2719.0], ["人口", 2304.0], ["生师比", 2105.0], ["财政支出占比", 2083.0], ["二产GDP", 2029.0], ["一产GDP", 1789.0], ["数字经济指数", 1705.0], ["tech", 1662.0]], 
            "四川省": [["人口", 4094.0], ["空气质量", 3822.0], ["财政支出占比", 3092.0], ["平均房价", 2933.0], ["就业人数", 2515.0], ["乡村城镇养老保险比", 2387.0], ["共同富裕综合指标", 2113.0], ["数字经济指数", 2021.0], ["生师比", 1704.0], ["二产GDP", 1672.0]], 
            "天津市": [["城镇率", 3119.0], ["就业率", 3066.0], ["一产GDP", 2736.0], ["gdp", 2331.0], ["tech", 2226.0], ["就业人数", 2162.0], ["数字经济指数", 2126.0], ["人口", 1956.0], ["空气质量", 1720.0], ["二产GDP", 1673.0]], 
            "云南省": [["空气质量", 4812.0], ["数字经济指数", 4726.0], ["人口", 3552.0], ["就业人数", 3290.0], ["就业率", 2425.0], ["乡村城镇养老保险比", 2419.0], ["共同富裕综合指标", 2363.0], ["城镇率", 2203.0], ["accident_dead", 2080.0], ["财政支出占比", 1718.0]], 
            "浙江省": [["空气质量", 4513.0], ["人口", 4236.0], ["数字经济指数", 3718.0], ["就业率", 2987.0], ["共同富裕综合指标", 2841.0], ["乡村养老保险人数", 2426.0], ["平均房价", 2388.0], ["就业人数", 2282.0], ["一产GDP", 1685.0], ["财政支出占比", 1548.0]], 
            "重庆市": [["空气质量", 4305.0], ["数字经济指数", 3883.0], ["每万人医疗保险", 3762.0], ["人口", 3360.0], ["生师比", 3004.0], ["共同富裕综合指标", 2650.0], ["trash", 2325.0], ["医疗保险参保人数", 1719.0], ["交通事故数量", 1698.0], ["平均房价", 1635.0]]};

        lineData = [
            //东部
            {name:'天津市', value:10, coords:[[117.190182,39.125596],[133.190182,42.125596]]},
            {name:"北京市", value:1, coords:[[116.405285,39.904989],[116.405285,39.904989]]},
            {name:"山东省", value:1, coords:[[117.000923,36.675807] ,[150.000923,40.675807] ]},
            {name:"江苏省", value:1, coords:[[119.486506,32.983991] ,[151.486506,33.983991]]},
            {name:"上海市", value:1, coords:[[121.472644,31.231706] ,[145.472644,31.231706] ]},
            {name:"浙江省", value:1, coords:[[120.153576,30.287459] ,[152.153576,27.287459] ]},
            {name:"福建省", value:1, coords:[[119.306239,26.075302] ,[151.306239,20.075302] ]},
            {name:"陕西省", value:1, coords:[[108.948024,34.263161] ,[108.948024,34.263161] ]},
            {name:"内蒙古自治区", value:1, coords:[[111.670801,40.818311] ,[101.670801,48.818311] ]},
            
            {name:"辽宁省", value:1, coords:[[123.429096,41.796767] ,[154.3245,48.886841] ]},
            {name:"吉林省", value:1, coords:[[125.3245,43.886841] ,[146.3245,48.886841] ]},
            {name:"黑龙江省", value:1, coords:[[126.642464,45.756967] ,[135.642464,49.756967] ]},
            
            {name:"山西省", value:1, coords:[[112.549248,37.857014] ,[113.549248,47.857014] ]},
            {name:"河北省", value:1, coords:[[114.502461,38.045474] ,[124.502461,48.045474] ]},
            {name:"河南省", value:1, coords:[[113.665412,34.757975] ,[130.665412,34.757975] ]},
            
            {name:"安徽省", value:1, coords:[[117.283042,31.86119],[120.283042,31.86119]]},
            //西部
            {name:"甘肃省", value:1, coords:[[103.823557,36.058039] ,[70.823557,46.058039] ]},
            {name:"青海省", value:1, coords:[[96.043533,35.726403] ,[80.043533,35.726403] ]},
            //中部
            {name:"宁夏回族自治区", value:1, coords:[[106.278179,38.46637] , [90.278179,45.46637]]},
            {name:"贵州省", value:1, coords:[[106.713478,26.578343] ,[80.713478,10.578343] ]},
            {name:"江西省", value:1, coords:[[115.892151,28.676493] ,[130.892151,16.676493] ]},
            {name:"湖北省", value:1, coords:[[114.298572,30.584355] ,[118.298572,23.584355] ]},
            {name:"湖南省", value:1, coords:[[112.982279,28.19409] ,[120.982279,16.19409] ]},
            {name:"重庆市", value:1, coords:[[106.504962,29.533155] ,[70.504962,22.533155] ]},
            {name:"四川省", value:1, coords:[[104.065735,30.659462] ,[84.065735,28.659462] ]},
            
            //南部
            {name:"海南省", value:1, coords:[[110.33119,20.031971] ,[106.33119,10.031971] ]},
            {name:"广西壮族自治区", value:1, coords:[[108.320004,22.82402] ,[95.320004,15.82402] ]},
            {name:"广东省", value:1, coords:[[113.280637,23.125178] ,[120.280637,10.125178] ]},
            {name:"云南省", value:1, coords:[[102.712251,25.040609] ,[82.712251,20.040609] ]},
        ]

        function label_data(params)
        {
            //console.log(params)
            var pname = params.name;
            label = '';
            for(var i=0; i<5; i++)
            {
                label += i+1 + '.' + province_data[pname][i][0];
                label += '\n';
            }
            return pname + '\n' + label;
        }

        var seriesData = [];
        var labelData = [
            //{name:"北京市", value:[116.405285,39.904989]}
        ];
        seriesData.push({
            coordinateSystem:'geo', 
            type: 'scatter',
            data: labelData,
            //color: '#fff',
            label: {
                normal:{
                    show:true,
                    //padding:[10,20],
                    //areaColor: '#000',
                    //backgroundColor: '#00A2FF',
                    borderRadius: 7,
                    formatter: '{b}'
                },
                //emphasis:{show:true}
            },
            symbolSize:1
        });

        seriesData.push({
            type:'lines',
            symbol:'circle',
            symbolSize: [4,6],
            color: '#fff',
            label: {
                show:true,
                padding:[3,5],
                backgroundColor: '#00A2FF',
                borderRadius: 7,
                align: 'left',
                formatter: label_data
            },
            lineStyle:{
                type:'solid',
                //color:'#fff',
            },
            data:lineData
        });

        //console.log(geoall.length)
        function drawchina(data) {
            var chinamap = echarts.init(document.getElementById('map'));
            var option1 = {
            // 背景颜色
            backgroundColor: "#404a59",
            // 提示浮窗样式
            tooltip: {
                show: true,
                trigger: "item",
                alwaysShowContent: false,
                backgroundColor: "#0C121C",
                borderColor: "rgba(0, 0, 0, 0.16);",
                hideDelay: 100,
                triggerOn: "mousemove",
                enterable: true,
                textStyle: {
                    color: "#DADADA",
                    fontSize: "12",
                    width: 20,
                    height: 30,
                    overflow: "break",
                },
                showDelay: 100
            },
            // 地图配置
            geo: {
                map: "china",
                zoom: 1.2,
                roam: true,
                //label: {
                //    // 通常状态下的样式
                //    normal: {
                //        show: true,
                //        //padding:[10,20],
                //        //areaColor: '#323c48',
                //        //backgroundColor: '#00A2FF',
                //        //borderRadius: 7,
                //        //formatter: '{b}',
                //        textStyle: {
                //            color: "#fff",
                //        },
                //    },
                //    // 鼠标放上去的样式
                //    emphasis: {
                //        textStyle: {
                //            color: "#fff",
                //        },
                //    },
                //},
                // 地图区域的样式设置
                itemStyle: {
                    normal: {
                        areaColor: '#282C34',
                        borderColor: "rgba(147, 235, 248, 1)",
                        borderWidth: 1,
                    },
                    // 鼠标放上去高亮的样式
                    emphasis: {
                        areaColor: "#389BB709",
                        borderWidth: 0,
                    },
                },
            },
            series:seriesData,
            };
            echarts.registerMap("china",data);
            chinamap.setOption(option1, true);
        }
        fetch('https://geo.datav.aliyun.com/areas_v3/bound/100000_full.json')
        // fetch()接收到的response是一个 Stream 对象
        // response.json()是一个异步操作，取出所有内容，并将其转为 JSON 对象
        .then(response => response.json())
        .then(json => drawchina(json))//console.log(json))
        .catch(err => console.log('Request Failed', err)); 

    </script>
</body>
</html>
